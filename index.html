  <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beach Club Ikal - Reserva de Camas</title>
    
    <style>
        header {
    background-color: #8b5e3c;
    color: #fff;
    text-align: center;
    padding: 1.5rem;
    width: 100%;
    letter-spacing: 1px;
}

.main-container {
    display: flex;
    justify-content: space-between;
    width: 90%;
    max-width: 1200px;
    margin: 2rem auto;
    gap: 2rem;
}

.map-container {
    width: 70%;
    position: relative;
    border: 2px solid #c4a484;
    padding: 10px;
    box-sizing: border-box;
    background-color: #e8dfd1;
    border-radius: 12px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.08);
}

.map-container .cama,
.map-container .shala,
.map-container .piscina,
.map-container .cancha,
.map-container .bar {
    position: absolute;
    border-radius: 8px;
    text-align: center;
    font-weight: 600;
    color: #fff;
    transition: transform 0.2s ease;
}

.map-container .cama {
    width: 50px;
    height: 50px;
    line-height: 50px;
    cursor: pointer;
    background-color: #6b8f71;
}

.map-container .cama:hover {
    transform: scale(1.08);
    background-color: #5e7f63;
}

.map-container .cama.reservada {
    background-color: #b64b34;
    cursor: not-allowed;
}

.map-container .cama.seleccionada {
    border: 3px solid #d4a373;
}

.shala {
    height: 40px;
    background-color: #b68c5a;
    line-height: 40px;
}

.piscina {
    background-color: #7fb8b0;
    height: 60px;
    line-height: 60px;
}

.cancha {
    background-color: #d9c38f;
    height: 60px;
    line-height: 60px;
    color: #3e3a36;
}

.bar {
    background-color: #8aa564;
    height: 40px;
    line-height: 40px;
}

.form-container {
    width: 30%;
    padding: 25px;
    background-color: #fffdf8;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
    border: 1px solid #e0d7ca;
}

.form-container h2 {
    margin-bottom: 0.5rem;
    color: #5c4836;
}

.form-info {
    font-size: 0.9rem;
    margin-bottom: 1.5rem;
    color: #6e665f;
}

.form-group {
    margin-bottom: 1rem;
}

label {
    display: block;
    font-weight: bold;
    margin-bottom: 0.3rem;
    color: #4e4338;
}

input, select, button {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-family: inherit;
}

button {
    background-color: #6b8f71;
    color: white;
    font-weight: bold;
    cursor: pointer;
    border: none;
    transition: background 0.3s;
}

button:hover {
    background-color: #547a5c;
}

.habitacion-group,
.externo-group {
    display: none;
}

.mar {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    font-size: 20px;
    font-weight: bold;
    color: #7fb8b0;
}

    </style>
 </head>
<body>
    <header>
        <h1>Beach Club Ikal - Reserva de Camas</h1>
    </header> 

    <div class="main-container">
        <div class="map-container">
            <div class="mar">Mar Caribe</div>

                <!-- Primera línea (Infi) -->
    <div class="cama disponible" style="top: 10%; left: 5%;" data-cama="Infi 6">Infi 6</div>
    <div class="cama disponible" style="top: 10%; left: 13%;" data-cama="Infi 5">Infi 5</div>
    <div class="cama disponible" style="top: 10%; left: 21%;" data-cama="Infi 4">Infi 4</div>
    <div class="cama disponible" style="top: 10%; left: 29%;" data-cama="Infi 3">Infi 3</div>
    <div class="cama disponible" style="top: 10%; left: 37%;" data-cama="Infi 2">Infi 2</div>
    <div class="cama disponible" style="top: 10%; left: 45%;" data-cama="Infi 1">Infi 1</div>

    <!-- Shala -->
    <div class="shala" style="top: 10%; left: 55%; width: 10%;">Shala</div>

    <!-- Segunda línea (Camas 10 a 13) -->
    <div class="cama disponible" style="top: 10%; left: 67%;" data-cama="Cama 13">Cama 13</div>
    <div class="cama disponible" style="top: 10%; left: 74%;" data-cama="Cama 12">Cama 12</div>
    <div class="cama disponible" style="top: 10%; left: 81%;" data-cama="Cama 11">Cama 11</div>
    <div class="cama disponible" style="top: 10%; left: 88%;" data-cama="Cama 10">Cama 10</div>

    <!-- Segunda línea camas Pool -->
    <div class="cama disponible" style="top: 30%; left: 5%;" data-cama="Pool 4">Pool 4</div>
    <div class="cama disponible" style="top: 30%; left: 15%;" data-cama="Pool 3">Pool 3</div>
    <div class="cama disponible" style="top: 30%; left: 25%;" data-cama="Pool 2">Pool 2</div>
    <div class="cama disponible" style="top: 30%; left: 35%;" data-cama="Pool 1">Pool 1</div>

    <!-- Piscina y Cancha -->
    <div class="piscina" style="top: 50%; left: 5%; width: 20%;">Piscina</div>
    <div class="cancha" style="top: 50%; left: 30%; width: 50%;">Cancha Volleyball</div>

    <!-- Última línea -->
    <div class="bar" style="top: 70%; left: 5%; width: 20%;">Matcha Mama</div>
    <div class="cama disponible" style="top: 70%; left: 30%;" data-cama="Cama 6">Cama 6</div>
    <div class="cama disponible" style="top: 70%; left: 40%;" data-cama="Cama 5">Cama 5</div>
    <div class="cama disponible" style="top: 70%; left: 50%;" data-cama="Cama 4">Cama 4</div>
    <div class="cama disponible" style="top: 70%; left: 60%;" data-cama="Cama 3">Cama 3</div>
    <div class="cama disponible" style="top: 70%; left: 70%;" data-cama="Cama 2">Cama 2</div>
    <div class="cama disponible" style="top: 70%; left: 80%;" data-cama="Cama 1">Cama 1</div>
</div>

<div class="form-container">
    <h2>Reservar Cama</h2>
    <p class="form-info">Consumo mínimo de $100 USD. Llegar antes de las 9:30am con 15/20 minutos de tolerancia.</p>
    <form id="reservar-form">
        <div class="form-group">
            <label for="nombre">Nombre y Apellido</label>
            <input type="text" id="nombre" required>
        </div>
        <div class="form-group">
            <label for="telefono">Número de WhatsApp</label>
            <input type="tel" id="telefono" required>
        </div>
        <div class="form-group">
            <label for="fecha">Fecha de Reserva</label>
            <input type="date" id="fecha" required>
        </div>
        <div class="form-group">
            <label for="cliente">¿Es Cliente del Hotel?</label>
            <select id="cliente" required>
                <option value="" disabled selected>Seleccione</option>
                <option value="habitacion">Sí</option>
                <option value="externo">No</option>
            </select>
        </div>
        <div class="form-group habitacion-group">
            <label for="habitacion">Número de Habitación</label>
            <input type="text" id="habitacion">
        </div>
        <div class="form-group externo-group">
            <p>Los clientes externos tienen un consumo mínimo de $100 USD.</p>
        </div>
        <button type="submit">Reservar</button>
    </form>
</div>

    </div> 

   <script type="module">
  // Importar Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs, query, where } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

  // Configuración de Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyD7EzMjRsm0OHkUBV7bqq048VaCxTLzoLY",
    authDomain: "beach-reservas.firebaseapp.com",
    projectId: "beach-reservas",
    storageBucket: "beach-reservas.firebasestorage.app",
    messagingSenderId: "1092537882031",
    appId: "1:1092537882031:web:003c91f41de57b83a5cb5a",
    measurementId: "G-FK6DX5Y6F4"
  };

  // Inicializar Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Selecciones del formulario
  const clienteSelect = document.getElementById('cliente');
  const habitacionGroup = document.querySelector('.habitacion-group');
  const externoGroup = document.querySelector('.externo-group');
  const camas = document.querySelectorAll('.map-container .cama');
  let seleccionada = null;

  clienteSelect.addEventListener('change', () => {
      habitacionGroup.style.display = clienteSelect.value === 'habitacion' ? 'block' : 'none';
      externoGroup.style.display = clienteSelect.value === 'externo' ? 'block' : 'none';
  });

  // Selección de cama
  camas.forEach(cama => {
      cama.addEventListener('click', () => {
          const fechaSeleccionada = document.getElementById('fecha').value;
          if (!fechaSeleccionada) {
              alert("Primero selecciona una fecha para la reserva.");
              return;
          }
          if (cama.classList.contains("reservada")) return;

          camas.forEach(c => c.classList.remove('seleccionada'));
          cama.classList.add('seleccionada');
          seleccionada = cama.getAttribute('data-cama');
      });
  });

  // Cargar reservas de la fecha seleccionada desde Firebase
  async function cargarReservas(fecha) {
      const reservasQuery = query(collection(db, "reservas"), where("fecha", "==", fecha));
      const querySnapshot = await getDocs(reservasQuery);
      camas.forEach(c => c.classList.remove("reservada"));
      querySnapshot.forEach((doc) => {
          const data = doc.data();
          const camaOcupada = Array.from(camas).find(c => c.getAttribute('data-cama') === data.cama);
          if (camaOcupada) camaOcupada.classList.add("reservada");
      });
  }

  // Guardar reserva en Firebase
  async function guardarReserva(reserva) {
      try {
          await addDoc(collection(db, "reservas"), reserva);
      } catch (e) {
          console.error("Error al guardar reserva:", e);
      }
  }

  // Enviar formulario
  document.getElementById('reservar-form').addEventListener('submit', async (e) => {
      e.preventDefault();

      const nombre = document.getElementById('nombre').value;
      const telefono = document.getElementById('telefono').value;
      const fecha = document.getElementById('fecha').value;
      const cliente = clienteSelect.value;
      const habitacion = document.getElementById('habitacion').value;

      if (!seleccionada) {
          alert('Por favor selecciona una cama.');
          return;
      }

      const reserva = { cama: seleccionada, nombre, telefono, fecha, cliente, habitacion };
      await guardarReserva(reserva);

      // Bloquear cama y cambiar color
      const camaObj = Array.from(camas).find(c => c.getAttribute('data-cama') === seleccionada);
      camaObj.classList.add('reservada');
      camaObj.classList.remove('seleccionada');

      // Mensaje para huésped
      let mensaje = `Hola ${nombre}, tu reserva ha sido registrada para la cama ${seleccionada} el día ${fecha}.\n`;
      mensaje += `Recuerda que el consumo mínimo es de $100 USD y debes llegar antes de las 9:30am con 15' / 20' minutos de tolerancia. \n`;
      mensaje += cliente === 'habitacion' ? `Cliente: Hotel (Habitación ${habitacion})` : 'Cliente: Externo';

      // Enviar WhatsApp al huésped
      const whatsappUrlHuesped = `https://wa.me/${telefono.replace(/[^\d]/g, '')}?text=${encodeURIComponent(mensaje)}`;
      window.open(whatsappUrlHuesped, '_blank');

      // Enviar WhatsApp al beach club
      const numeroRestaurante = "529991234937"; // ⚠️ Cambiá este número al real del club
      const mensajeInterno = `Nueva reserva:\n- Nombre: ${nombre}\n- Fecha: ${fecha}\n- Cama: ${seleccionada}\n- Cliente: ${cliente === 'habitacion' ? 'Hotel (Habitación ' + habitacion + ')' : 'Externo'}`;
      const whatsappUrlInterno = `https://wa.me/${numeroRestaurante}?text=${encodeURIComponent(mensajeInterno)}`;
      window.open(whatsappUrlInterno, '_blank');

      // Limpiar selección y formulario
      seleccionada = null;
      document.getElementById('reservar-form').reset();
  });

  // Cuando cambia la fecha, se actualiza el mapa con las reservas de Firebase
  document.getElementById('fecha').addEventListener('change', (e) => {
      const fechaSeleccionada = e.target.value;
      cargarReservas(fechaSeleccionada);
  });
</script>


</body>
</html> 


