  <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beach Club Ikal - Reserva de Camas</title>
    
    <style>
        header {
    background-color: #8b5e3c;
    color: #fff;
    text-align: center;
    padding: 1.5rem;
    width: 100%;
    letter-spacing: 1px;
}

.main-container {
    display: flex;
    justify-content: space-between;
    width: 90%;
    max-width: 1200px;
    margin: 2rem auto;
    gap: 2rem;
}

.map-container {
    width: 70%;
    position: relative;
    border: 2px solid #c4a484;
    padding: 10px;
    box-sizing: border-box;
    background-color: #e8dfd1;
    border-radius: 12px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.08);
}

.map-container .cama,
.map-container .shala,
.map-container .piscina,
.map-container .cancha,
.map-container .bar {
    position: absolute;
    border-radius: 8px;
    text-align: center;
    font-weight: 600;
    color: #fff;
    transition: transform 0.2s ease;
}

.map-container .cama {
    width: 50px;
    height: 50px;
    line-height: 50px;
    cursor: pointer;
    background-color: #6b8f71;
}

.map-container .cama:hover {
    transform: scale(1.08);
    background-color: #5e7f63;
}

.map-container .cama.reservada {
    background-color: #b64b34;
    cursor: not-allowed;
}

.map-container .cama.seleccionada {
    border: 3px solid #d4a373;
}

.shala {
    height: 40px;
    background-color: #b68c5a;
    line-height: 40px;
}

.piscina {
    background-color: #7fb8b0;
    height: 60px;
    line-height: 60px;
}

.cancha {
    background-color: #d9c38f;
    height: 60px;
    line-height: 60px;
    color: #3e3a36;
}

.bar {
    background-color: #8aa564;
    height: 40px;
    line-height: 40px;
}

.form-container {
    width: 30%;
    padding: 25px;
    background-color: #fffdf8;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
    border: 1px solid #e0d7ca;
}

.form-container h2 {
    margin-bottom: 0.5rem;
    color: #5c4836;
}

.form-info {
    font-size: 0.9rem;
    margin-bottom: 1.5rem;
    color: #6e665f;
}

.form-group {
    margin-bottom: 1rem;
}

label {
    display: block;
    font-weight: bold;
    margin-bottom: 0.3rem;
    color: #4e4338;
}

input, select, button {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-family: inherit;
}

button {
    background-color: #6b8f71;
    color: white;
    font-weight: bold;
    cursor: pointer;
    border: none;
    transition: background 0.3s;
}

button:hover {
    background-color: #547a5c;
}

.habitacion-group,
.externo-group {
    display: none;
}

.mar {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    font-size: 20px;
    font-weight: bold;
    color: #7fb8b0;
}

/* TABLET y MOBILE */
@media (max-width: 1024px) {
  .main-container {
    flex-direction: column;
    width: 95%;
  }

  .map-container,
  .form-container {
    width: 100%;
  }

  .form-container {
    margin-top: 1.5rem;
  }
}
/* Escala del mapa según pantalla */
@media (max-width: 768px) {
  .map-container {
    min-height: 420px;
  }

  .map-container .cama {
    width: 42px;
    height: 42px;
    line-height: 42px;
    font-size: 0.7rem;
  }

  .shala,
  .bar {
    font-size: 0.75rem;
  }
}

@media (max-width: 480px) {
  .map-container {
    min-height: 380px;
  }

  .map-container .cama {
    width: 38px;
    height: 38px;
    line-height: 38px;
    font-size: 0.65rem;
  }

  .mar {
    font-size: 16px;
  }
}

    </style>
 </head>
 

<body>
  <div id="confirmacion"
style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6);
justify-content:center; align-items:center; z-index:9999;">
  
  <div style="background:#fff; padding:25px; border-radius:12px; max-width:420px; text-align:center;">
    <h3>✅ Reserva confirmada</h3>

    <p id="datos-reserva" style="margin:15px 0;"></p>

    <hr>

    <p style="font-size:1rem;">
      ⏰ Te recordamos que contamos con una tolerancia de 
      <strong>15 minutos</strong> a partir del horario de tu reserva.<br>
      En caso de no presentarte dentro de ese tiempo, la cama podrá ser liberada
      para otros huéspedes.
    </p>

    <p style="font-size:1rem; margin-top:10px;">
      ⏰ We remind you that we have a 
      <strong>15-minute tolerance</strong> from your reservation time.<br>
      If you do not arrive within this time, the bed may be released for other guests.
    </p>

    <button onclick="document.getElementById('confirmacion').style.display='none'"
    style="margin-top:15px; padding:10px 20px; background:#6b8f71; color:#fff; border:none; border-radius:6px;">
      Cerrar
    </button>
  </div>
</div>
    <header>
        <h1>Beach Club Ikal - Reserva de Camas</h1>
    </header> 

    <div class="main-container">
        <div class="map-container">
            <div class="mar">Mar Caribe</div>

                <!-- Primera línea (Infi) -->
    <div class="cama disponible" style="top: 10%; left: 5%;" data-cama="Infi 6">Infi 6</div>
    <div class="cama disponible" style="top: 10%; left: 13%;" data-cama="Infi 5">Infi 5</div>
    <div class="cama disponible" style="top: 10%; left: 21%;" data-cama="Infi 4">Infi 4</div>
    <div class="cama disponible" style="top: 10%; left: 29%;" data-cama="Infi 3">Infi 3</div>
    <div class="cama disponible" style="top: 10%; left: 37%;" data-cama="Infi 2">Infi 2</div>
    <div class="cama disponible" style="top: 10%; left: 45%;" data-cama="Infi 1">Infi 1</div>

    <!-- Shala -->
    <div class="shala" style="top: 10%; left: 55%; width: 10%;">Shala</div>

    <!-- Segunda línea (Camas 10 a 13) -->
    <div class="cama disponible" style="top: 10%; left: 67%;" data-cama="Cama 13">Cama 13</div>
    <div class="cama disponible" style="top: 10%; left: 74%;" data-cama="Cama 12">Cama 12</div>
    <div class="cama disponible" style="top: 10%; left: 81%;" data-cama="Cama 11">Cama 11</div>
    <div class="cama disponible" style="top: 10%; left: 88%;" data-cama="Cama 10">Cama 10</div>

    <!-- Segunda línea camas Pool -->
    <div class="cama disponible" style="top: 30%; left: 5%;" data-cama="Pool 4">Pool 4</div>
    <div class="cama disponible" style="top: 30%; left: 15%;" data-cama="Pool 3">Pool 3</div>
    <div class="cama disponible" style="top: 30%; left: 25%;" data-cama="Pool 2">Pool 2</div>
    <div class="cama disponible" style="top: 30%; left: 35%;" data-cama="Pool 1">Pool 1</div>

    <!-- Piscina y Cancha -->
    <div class="piscina" style="top: 50%; left: 5%; width: 20%;">Piscina</div>
    <div class="cancha" style="top: 50%; left: 30%; width: 50%;">Cancha Volleyball</div>

    <!-- Última línea -->
    <div class="bar" style="top: 70%; left: 5%; width: 20%;">Matcha Mama</div>
    <div class="cama disponible" style="top: 70%; left: 30%;" data-cama="Cama 6">Cama 6</div>
    <div class="cama disponible" style="top: 70%; left: 40%;" data-cama="Cama 5">Cama 5</div>
    <div class="cama disponible" style="top: 70%; left: 50%;" data-cama="Cama 4">Cama 4</div>
    <div class="cama disponible" style="top: 70%; left: 60%;" data-cama="Cama 3">Cama 3</div>
    <div class="cama disponible" style="top: 70%; left: 70%;" data-cama="Cama 2">Cama 2</div>
    <div class="cama disponible" style="top: 70%; left: 80%;" data-cama="Cama 1">Cama 1</div>
</div>

<div class="form-container">
    <h2>Reservar Cama</h2>
    <p class="form-info"></p>
    <form id="reservar-form">
        <div class="form-group">
            <label for="nombre">Nombre y Apellido</label>
            <input type="text" id="nombre" required>
        </div>
        
        <div class="form-group">
            <label for="fecha">Fecha de Reserva</label>
            <input type="date" id="fecha" required>
            
        </div>
        <div class="form-group">
<label for="hora">Horario</label>
<select id="hora" required>
<option value="" disabled selected>Seleccione horario</option>
<option value="08:00">08:00</option>
<option value="08:30">08:30</option>
<option value="09:00">09:00</option>
<option value="09:30">09:30</option>
<option value="10:00">10:00</option>
</select>
</div>
        <div class="form-group">
            <label for="cliente">¿Es Cliente del Hotel?</label>
            <select id="cliente" required>
                <option value="" disabled selected>Seleccione</option>
                <option value="habitacion">Sí</option>
                <option value="externo">No</option>
            </select>
        </div>
        <div class="form-group habitacion-group">
            <label for="habitacion">Número de Habitación</label>
            <input type="text" id="habitacion">
        </div>
        <div class="form-group externo-group">
            <p>.</p>
        </div>
        <button type="submit">Reservar</button>
    </form>
</div>

    </div> 

 <script type="module">

const clienteSelect = document.getElementById('cliente');
const habitacionGroup = document.querySelector('.habitacion-group');
const habitacionInput = document.getElementById('habitacion');
const camas = document.querySelectorAll('.map-container .cama');

let seleccionada = null;
const reservasPorFechaHora = {};

// Mostrar / ocultar habitación
document.getElementById('fecha').addEventListener('change', e => {
  const fecha = e.target.value;

  // limpiar mapa
  camas.forEach(c => c.classList.remove('reservada', 'seleccionada'));
  seleccionada = null;

  // volver a pintar reservas SOLO por fecha
  if (reservasPorFecha[fecha]) {
    reservasPorFecha[fecha].forEach(nombre => {
      const cama = [...camas].find(c => c.dataset.cama === nombre);
      if (cama) cama.classList.add('reservada');
    });
  }
});


// Selección de camas
camas.forEach(cama => {
  cama.addEventListener('click', () => {
    if (cama.classList.contains('reservada')) return;

    camas.forEach(c => c.classList.remove('seleccionada'));
    cama.classList.add('seleccionada');
    seleccionada = cama.dataset.cama;
  });
});

// Cambio de fecha u horario → refresca bloqueos
function refrescarCamas() {
  const fecha = document.getElementById('fecha').value;
  const hora = document.getElementById('hora').value;

  camas.forEach(c => c.classList.remove('reservada','seleccionada'));
  seleccionada = null;

  if (reservasPorFechaHora[fecha]?.[hora]) {
    reservasPorFechaHora[fecha][hora].forEach(camaNombre => {
      const c = [...camas].find(x => x.dataset.cama === camaNombre);
      if (c) c.classList.add('reservada');
    });
  }
}

document.getElementById('fecha').addEventListener('change', refrescarCamas);
document.getElementById('hora').addEventListener('change', refrescarCamas);

// Envío formulario
document.getElementById('reservar-form').addEventListener('submit', async e => {
  e.preventDefault();

  const nombre = document.getElementById('nombre').value;
  const fecha = document.getElementById('fecha').value;
  const hora = document.getElementById('hora').value;
  const cliente = clienteSelect.value;
  const habitacion = habitacionInput.value;

  if (!seleccionada) {
    alert('Seleccioná una cama');
    return;
  }

  if (!hora) {
    alert('Seleccioná un horario');
    return;
  }

  if (cliente === 'habitacion' && !habitacion) {
    alert('Ingresá el número de habitación');
    return;
  }

  if (!reservasPorFechaHora[fecha]) reservasPorFechaHora[fecha] = {};
  if (!reservasPorFechaHora[fecha][hora]) reservasPorFechaHora[fecha][hora] = [];

  reservasPorFechaHora[fecha][hora].push(seleccionada);

  document.getElementById('datos-reserva').innerHTML = `
    <strong>Nombre:</strong> ${nombre}<br>
    <strong>Fecha:</strong> ${fecha}<br>
    <strong>Horario:</strong> ${hora}<br>
    <strong>Cama:</strong> ${seleccionada}<br>
    <strong>Cliente:</strong> ${cliente === 'habitacion'
      ? 'Hotel - Hab. ' + habitacion
      : 'Externo'}
  `;

  document.getElementById('confirmacion').style.display = 'flex';

  await enviarAGoogleSheets({
    fecha,
    hora,
    cama: seleccionada,
    nombre,
    cliente,
    habitacion
  });

  refrescarCamas();
});

// Google Sheets
async function enviarAGoogleSheets(reserva) {
  await fetch('https://script.google.com/macros/s/AKfycbyJ967YRSg7MljVd8hi08Oowta14dN-U9eByZSey8du5whM2ArE91yfje1QOuPCJJzX/exec', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(reserva)
  });
}

</script>



</body>
</html> 

